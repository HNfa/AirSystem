<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JM航空</title>
    <link rel="stylesheet" href="static/element-ui/lib/theme-chalk/index.css"/>
    <link rel="stylesheet" href="static/font/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="static/css/index.css"/>
</head>
<body>
<div id="app">
    <el-menu mode="horizontal" :default-active="activeIndex" active-text-color="#409EFF">
        <el-menu-item index="0" id="logo">JM航空&nbsp;&nbsp;&nbsp; <span
                class="fa fa-plane fa-2x"></span></el-menu-item>
        <el-menu-item index="1"><a href="register.html">机票预订</a></el-menu-item>
        <el-menu-item index="2"><a href="register.html">航班查询</a></el-menu-item>
        <el-menu-item id="user" index="3">
            <img class="el-tooltip" src="static/image/flag.png"/>
            <a href="logout">登陆</a>
        </el-menu-item>
    </el-menu>
    <div id="main">
        <el-col>
            <el-card shadow="always">
                <el-steps :active="activeStep" finish-status="success" align-center>
                    <el-step title="Step1" description="选择航班"></el-step>
                    <el-step title="Step2" description="填写订单"></el-step>
                    <el-step title="Step3" description="确认并支付"></el-step>
                    <el-step title="Step4" description="出票成功"></el-step>
                </el-steps>
            </el-card>
        </el-col>


        <el-col>
            <el-card shadow="always">
                <div class="myCard">
                    <el-form :inline="true" :model="searchEntity" ref="searchEntity" :rules="rules">
                        <el-form-item prop="stCity">

                            <el-cascader
                                    :props="{ value:'label',expandTrigger:'hover'}"
                                    :options="citys"
                                    v-model="searchEntity.stCity"
                                    :show-all-levels="false"
                                    placeholder="出发城市">
                            </el-cascader>
                        </el-form-item>

                        <el-form-item>
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle-thin fa-stack-2x"></i>
                                <i class="fa fa-exchange fa-stack-1x"></i>
                            </span>
                        </el-form-item>

                        <el-form-item prop="edCity">
                            <!--                            :props="{ expandTrigger:'hover' ,multiple:true,disabled:'disabled'}"-->
                            <el-cascader
                                    :props="{ value:'label',expandTrigger:'hover'}"
                                    :options="citys"
                                    v-model="searchEntity.edCity"
                                    :show-all-levels="false"
                                    placeholder="到达城市">
                            </el-cascader>
                        </el-form-item>
                        &nbsp;&nbsp;
                        <el-form-item prop="planTime">
                            <el-date-picker
                                    v-model="searchEntity.planTime"
                                    align="right"
                                    type="date"
                                    placeholder="选择日期"
                                    format="yyyy 年 MM 月 dd 日"
                                    value-format="yyyy-MM-dd"
                                    :picker-options="pickerOptions">
                            </el-date-picker>
                        </el-form-item>
                        &nbsp;&nbsp;
                        <el-form-item>
                            <el-button
                                    type="primary"
                                    icon="el-icon-search"
                                    @click="search('searchEntity')">查询
                            </el-button> &nbsp;&nbsp;
                            <el-button
                                    icon="el-icon-delete"
                                    @click="searchEntity={}"
                                    type="primary" plain>清空
                            </el-button>
                        </el-form-item>
                    </el-form>

                </div>
            </el-card>
        </el-col>

        <el-col>
            <el-card shadow="always" v-loading="loading"
                     element-loading-text="拼命加载中"
                     element-loading-spinner="el-icon-loading"
                     element-loading-background="rgba(150, 230, 250, 0.8)">


                <div class="myCard">
                    <div v-for="item in InfoOfFlight"
                         :key="item.flightsId">
                        <el-table :data="item.tickets"
                                  style="width: 80%"
                                  max-height="500"
                                  :default-sort="{prop: 'spaceId', order: 'descending'}">
                            <el-table-column label="舱位"
                                             width="250">
                                <template slot-scope="scope">
                                    <span class="fa fa-lg">
                                        {{ scope.row.spaceName }}{{scope.row.spaceName}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column label="行李|退改规则"
                                             width="180">
                                <template slot-scope="scope">
                                    <el-popover trigger="hover" placement="top" @show="showRules(scope.row.spaceId)">
                                        <span class="">行李限额:</span>
                                        <el-divider></el-divider>
                                        <span class="">退改规则:</span>
                                        <div slot="reference">
                                            <el-tag size="medium">{{ scope.row.spaceId }}</el-tag>
                                        </div>
                                    </el-popover>
                                </template>
                            </el-table-column>
                            <el-table-column label="余票数"
                                             width="180">
                                <template slot-scope="scope">
                                    <span class="fa fa-lg fa-rmb"></span>
                                    <span class="fa fa-stack-1x text-danger">{{scope.row.ticketsPrice}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column label="操作">
                                <template slot-scope="scope">
                                    <el-button
                                            size="mini"
                                            round
                                            type="success"
                                            @click="orderTicket(scope.row.ticketsId)">预订
                                    </el-button>
                                </template>
                            </el-table-column>
                        </el-table>
                    </div>

                    <el-table
                            :data="tableData"
                            style="width: 80%"
                            max-height="250">
                        <el-table-column
                                label="舱位"
                                width="180">
                            <template slot-scope="scope">
                                <i class="el-icon-time"></i>
                                <span style="margin-left: 10px">{{ scope.row.date }}</span>
                            </template>
                        </el-table-column>
                        <el-table-column
                                label="姓名"
                                width="180">
                            <template slot-scope="scope">
                                <el-popover trigger="hover" placement="top">
                                    <p>姓名: {{ scope.row.name }}</p>
                                    <p>住址: {{ scope.row.address }}</p>
                                    <div slot="reference" class="name-wrapper">
                                        <el-tag size="medium">{{ scope.row.name }}</el-tag>
                                    </div>
                                </el-popover>
                            </template>
                        </el-table-column>
                        <el-table-column label="操作">
                            <template slot-scope="scope">
                                <el-button
                                        size="mini"
                                        @click="handleEdit(scope.$index, scope.row)">编辑
                                </el-button>
                                <el-button
                                        size="mini"
                                        type="danger"
                                        @click="handleDelete(scope.$index, scope.row)">删除
                                </el-button>
                            </template>
                        </el-table-column>
                    </el-table>
                </div>
            </el-card>
        </el-col>

    </div>


</div>

</body>
<script type="text/javascript" src="static/vue/vue.js"></script>
<script type="text/javascript" src="static/element-ui/lib/index.js"></script>
<script type="text/javascript" src="static/vue/vue-resource.js"></script>
<script type="text/javascript" src="static/js/index.js"></script>
</html>